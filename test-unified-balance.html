<!DOCTYPE html>
<html>
<head>
    <title>Test Unified Balance System</title>
    <script src="unified-balance.js"></script>
</head>
<body>
    <h1>Unified Balance System Test</h1>
    
    <div id="balance-display">
        <strong>Current Balance: <span id="balance">0</span> <span id="currency">Tokens</span></strong>
    </div>
    
    <div style="margin: 20px 0;">
        <button onclick="refreshBalance()">Refresh Balance</button>
        <button onclick="addTokens()">Add 10 Tokens</button>
        <button onclick="subtractTokens()">Subtract 5 Tokens</button>
        <button onclick="clearData()">Clear All Data</button>
    </div>
    
    <div id="output"></div>
    
    <script>
        async function refreshBalance() {
            const balance = await getBalance();
            const terminology = getTerminology();
            
            document.getElementById('balance').textContent = balance;
            document.getElementById('currency').textContent = terminology.currency;
            
            console.log('Balance refreshed:', balance, terminology.currency);
        }
        
        async function addTokens() {
            const result = await addBalance(10, 'faucet_claim', 'Test faucet claim');
            await refreshBalance();
            
            const output = document.getElementById('output');
            output.innerHTML += `<p>‚úÖ Added 10 tokens. New balance: ${result.balance}</p>`;
        }
        
        async function subtractTokens() {
            const result = await subtractBalance(5, 'game_bet', 'Test game bet');
            await refreshBalance();
            
            const output = document.getElementById('output');
            if (result.success) {
                output.innerHTML += `<p>üí∏ Subtracted 5 tokens. New balance: ${result.balance}</p>`;
            } else {
                output.innerHTML += `<p>‚ùå Failed to subtract tokens: ${result.error}</p>`;
            }
        }
        
        function clearData() {
            unifiedBalance.clearGuestData();
            refreshBalance();
            
            const output = document.getElementById('output');
            output.innerHTML += `<p>üóëÔ∏è All data cleared</p>`;
        }
        
        // Initialize
        window.addEventListener('load', refreshBalance);
    </script>
</body>
</html>
