(function(){var Ee;"use strict";class Me{constructor(e){this.rafId=null,this.previousTimestamp=null,this.isRunning=!1,this.wasRunningBeforeHidden=!1,this.count=0,this.mean=0,this.m2=0,this.maxFrameDeltaMs=0,this.jankCount=0,this.JANK_THRESHOLD_MS=(e==null?void 0:e.jankThresholdMs)??16.67,this.MAX_FRAME_DELTA_MS=(e==null?void 0:e.maxFrameDeltaMs)??1e3,this.PAUSE_ON_HIDDEN=(e==null?void 0:e.pauseOnHidden)??!1,this.boundFrameCallback=this.frameCallback.bind(this),this.PAUSE_ON_HIDDEN&&typeof document<"u"&&(this.visibilityHandler=()=>{try{document.hidden?(this.wasRunningBeforeHidden=this.isRunning,this.isRunning&&this.stop()):this.wasRunningBeforeHidden&&this.start()}catch(n){console.error("RafJankMeter visibility handler error:",n)}},document.addEventListener("visibilitychange",this.visibilityHandler,{passive:!0}))}start(){if(!this.isRunning){if(typeof requestAnimationFrame>"u"){console.warn("RafJankMeter: requestAnimationFrame not supported");return}this.isRunning=!0,this.previousTimestamp=null;try{this.rafId=requestAnimationFrame(this.boundFrameCallback)}catch(e){console.error("RafJankMeter: Failed to start RAF:",e),this.isRunning=!1}}}stop(){if(this.isRunning&&(this.isRunning=!1,this.rafId!==null&&typeof cancelAnimationFrame<"u")){try{cancelAnimationFrame(this.rafId)}catch(e){console.error("RafJankMeter: Failed to cancel RAF:",e)}this.rafId=null}}destroy(){if(this.stop(),this.wasRunningBeforeHidden=!1,this.visibilityHandler&&typeof document<"u"){try{document.removeEventListener("visibilitychange",this.visibilityHandler)}catch(e){console.error("RafJankMeter: Failed to remove listener:",e)}this.visibilityHandler=void 0}this.boundFrameCallback=null}getCurrentMetrics(){const e=this.count>1?Math.sqrt(this.m2/(this.count-1)):0;return{avgHz:this.mean>0?1e3/this.mean:0,stdDevFrameDeltaMs:e,jankCount:this.jankCount,maxFrameDeltaMs:this.maxFrameDeltaMs||0}}frameCallback(e){if(!this.isRunning)return;if(this.previousTimestamp===null){this.previousTimestamp=e,this.rafId=requestAnimationFrame(this.boundFrameCallback);return}const n=e-this.previousTimestamp;if(this.previousTimestamp=e,n>this.MAX_FRAME_DELTA_MS){this.rafId=requestAnimationFrame(this.boundFrameCallback);return}this.count++;const i=n-this.mean;this.mean+=i/this.count;const s=n-this.mean;this.m2+=i*s,n>this.maxFrameDeltaMs&&(this.maxFrameDeltaMs=n),n>this.JANK_THRESHOLD_MS&&this.jankCount++,this.rafId=requestAnimationFrame(this.boundFrameCallback)}}function Q(){try{const t=performance;return typeof performance>"u"||!t.memory?{usedJSHeapSize:null}:{usedJSHeapSize:t.memory.usedJSHeapSize!==void 0?Number(t.memory.usedJSHeapSize):null}}catch{return{usedJSHeapSize:null}}}const Z=t=>{try{return t()}catch{return}};function Ne(){const{hostname:t}=window.location;return window===window.top||t.includes("arkadiumarena.com")||t.includes("rtl.de")?t:Z(()=>{var e;return(e=window.top)==null?void 0:e.location.hostname})||Z(()=>new URL(document.referrer).hostname)||"default"}function Fe(){const t=Ne();return t.includes("googlesyndication")?"safeframe.googlesyndication.com":t}function x(t){try{const e=new Uint8Array(t);if(typeof crypto<"u"&&crypto.getRandomValues)crypto.getRandomValues(e);else for(let n=0;n<t;n++)e[n]=Math.floor(Math.random()*256);return Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}catch{let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*256).toString(16).padStart(2,"0");return e}}function Oe(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619)>>>0;return e>>>0}function He(t,e){return Oe(t)/4294967295<e}function ee(t){if(!(typeof t!="number"||!Number.isFinite(t)))return Math.round(t/1048576*100)/100}function xe(t){try{return t.replace(/\d{2,}/g,e=>"#".repeat(Math.min(e.length,6)))}catch{return t}}function Le(){try{const t=navigator.userAgent,e=t.match(/Edg\/(\d+\.\d+)/);if(e)return{name:"Edge",version:e[1]};if(t.includes("Chrome")){const i=t.match(/Chrome\/(\d+\.\d+)/);return{name:"Chrome",version:i==null?void 0:i[1]}}if(t.includes("Safari")&&!t.includes("Chrome")){const i=t.match(/Version\/(\d+\.\d+)/);return{name:"Safari",version:i==null?void 0:i[1]}}const n=t.match(/Firefox\/(\d+\.\d+)/);return n?{name:"Firefox",version:n[1]}:{name:"Other"}}catch{return{name:"Other"}}}function y(t){return typeof t=="number"&&Number.isFinite(t)}function De(){try{const t=document.currentScript;if(t instanceof HTMLScriptElement&&t.src)return t.src}catch{}}const o={N:"number",S:"string",M:"measurement",G:"tag",P:"span"},l={TIME:"timing",MEM:"mem",FPS:"fps",CTX:"context"},g={MS:"millisecond",HZ:"hertz",NONE:"none"},je={ttfr:[o.N,[o.M,o.P],g.MS,l.TIME],ttlr:[o.N,[o.M,o.P],g.MS,l.TIME],ttb:[o.N,[o.M,o.P],g.MS,l.TIME],page_to_first_ad:[o.N,[o.M,o.P],g.MS,l.TIME],page_to_last_ad:[o.N,[o.M,o.P],g.MS,l.TIME],script_exec:[o.N,[o.M,o.P],g.MS,l.TIME],memory_delta:[o.N,[o.M,o.P],g.NONE,l.MEM],memory_used:[o.N,[o.P],g.NONE,l.MEM],fps_avg:[o.N,[o.M,o.P],g.HZ,l.FPS],fps_std:[o.N,[o.M,o.P],g.MS,l.FPS],jank_count:[o.N,[o.M,o.P],g.NONE,l.FPS],max_frame_time:[o.N,[o.P],g.MS,l.FPS],batch_size:[o.N,[o.G,o.P],void 0,l.CTX],config_id:[o.S,[o.G,o.P],void 0,l.CTX],page_host:[o.S,[o.G,o.P],void 0,l.CTX],page_path:[o.S,[o.G,o.P],void 0,l.CTX],script_path:[o.S,[o.G,o.P],void 0,l.CTX],sample_rate:[o.N,[o.G,o.P],void 0,l.CTX],ABTestSlot1:[o.S,[o.G,o.P],void 0,l.CTX],ABTestRefreshGroup:[o.S,[o.G,o.P],void 0,l.CTX],screen_width:[o.N,[o.P],void 0,l.CTX],screen_height:[o.N,[o.P],void 0,l.CTX],browser_name:[o.S,[o.P],void 0,l.CTX],browser_version:[o.S,[o.P],void 0,l.CTX]},f=t=>{try{return t()}catch{return}},q=f(()=>performance.timeOrigin)??Date.now()-(f(()=>performance.now())??0),L=()=>f(()=>performance.now())??Date.now()-q,w=De(),Ge=(Ee=w==null?void 0:w.match(/\/(dev3?|dev2?|canary|alpha|stable|prod)\//i))==null?void 0:Ee[1],Ue=(w==null?void 0:w.includes("localhost"))||(w==null?void 0:w.includes("127.0.0.1")),te=(Ge??(Ue?"local":"unknown")).toLowerCase(),$=f(()=>Le())??{name:"Other"},z=Math.round(L()),ne=x(16);function Be(t){const e={enabled:!1,rate:.05,params:{},start:void 0,first:void 0,last:void 0,units:void 0,count:0,ids:new Set,mem:void 0,ttb:void 0,tId:void 0,raf:void 0,cfgId:void 0},n=()=>{var r,a;(r=e.raf)==null||r.stop(),(a=e.raf)==null||a.destroy(),e.raf=void 0,e.tId&&clearTimeout(e.tId),e.tId=void 0,f(()=>{performance.getEntriesByType("mark").forEach(d=>d.name.startsWith("ads:")&&performance.clearMarks(d.name)),performance.getEntriesByType("measure").forEach(d=>d.name.startsWith("ads:")&&performance.clearMeasures(d.name))}),e.start=e.first=e.last=e.units=e.mem=e.ttb=void 0,e.count=0,e.ids.clear()},i=r=>{const a=typeof r=="number"&&Number.isFinite(r)&&r>=0?r:.05;e.rate=a>1?1:a,e.enabled=e.rate>0&&(f(()=>window.self===window.top)??!1),e.enabled||n()},s=r=>{var m,v,h;if(!y(e.start))return;e.tId&&clearTimeout(e.tId);const a=e.raf?f(()=>e.raf.getCurrentMetrics())??{}:{};(m=e.raf)==null||m.stop(),(v=e.raf)==null||v.destroy(),e.raf=void 0;const d=(h=Q())==null?void 0:h.usedJSHeapSize,u=y(e.mem)&&y(d)?d-e.mem:void 0,c={ttfr:y(e.first)&&e.first>=e.start?Math.round(e.first-e.start):void 0,ttlr:(e.last??r)>=e.start?Math.round((e.last??r)-e.start):void 0,ttb:e.ttb,script_exec:z,memory_used:ee(d),memory_delta:ee(u),fps_avg:a.avgHz,fps_std:a.stdDevFrameDeltaMs,jank_count:a.jankCount??0,max_frame_time:a.maxFrameDeltaMs,batch_size:e.units,config_id:e.cfgId,page_host:Fe(),page_path:xe(location.pathname),script_path:w?new URL(w,location.href).pathname.replace(/\.js$/i,""):void 0,sample_rate:e.rate,screen_width:f(()=>screen.width),screen_height:f(()=>screen.height),browser_name:$.name,browser_version:$.version,...e.params};y(c.ttfr)&&(c.page_to_first_ad=Math.round(z+c.ttfr)),y(c.ttlr)&&(c.page_to_last_ad=Math.round(z+c.ttlr)),e.enabled&&e.rate>0&&He(ne,e.rate)&&qe(t,c,e.start,ne),n()};return i(t.sampleRate),{configLoaded:r=>{e.enabled&&r!=null&&f(()=>e.cfgId=String(r))},setSampleRate:i,setCustomParams:r=>{if(!e.enabled)return;if(!r||typeof r!="object"){e.params={};return}e.params={},(Array.isArray(r)?r:Object.entries(r)).forEach(d=>{if(!Array.isArray(d)||d.length<2)return;const[u,c]=d;u&&typeof c=="string"&&c.trim().length>0&&(e.params[u]=c)})},beginCycle:r=>{var a;e.enabled&&(n(),f(()=>performance.mark("ads:batch:start")),e.start=L(),e.units=r,e.mem=((a=Q())==null?void 0:a.usedJSHeapSize)??void 0,e.raf=new Me({jankThresholdMs:16.7,pauseOnHidden:!0}),f(()=>e.raf.start()),e.tId=window.setTimeout(()=>s(L()),15e3))},trackBidsComplete:()=>{!e.enabled||!y(e.start)||f(()=>{performance.mark("ads:batch:bids:complete"),performance.measure("ads:batch:ttb","ads:batch:start","ads:batch:bids:complete");const r=performance.getEntriesByName("ads:batch:ttb")[0];e.ttb=y(r==null?void 0:r.duration)?Math.round(r.duration):void 0})},trackRenderComplete:r=>{if(!e.enabled||!r||e.ids.has(r)||!y(e.start))return;const a=L();e.ids.add(r),e.count++,f(()=>{const d=`ads:render:${r}`;performance.mark(d),y(e.first)||(e.first=a,performance.measure("ads:batch:ttfr","ads:batch:start",d))}),e.last=a,y(e.units)&&e.count===e.units&&s(a)},cleanup:n}}function qe(t,e,n,i){const s={},r={environment:te},a={};for(const[h,b]of Object.entries(e)){if(b==null)continue;const O=je[h];if(!O)continue;const[H,A,T,C]=O,E=H===o.N?Number(b):b;if(H===o.N&&!y(E))continue;let _=h;C&&h.startsWith(`${C}_`)&&(_=h.substring(C.length+1)),C===l.MEM&&T===g.NONE&&!_.endsWith("_mb")&&(_+="_mb");const B=C?`ads.${C}.${_}`:`ads.${_}`;A.includes(o.M)&&H===o.N&&(s[B]={value:E,unit:T||"none"}),A.includes(o.G)&&(r[B]=String(E)),A.includes(o.P)&&(a[B]=E)}const d=x(8),u=x(8),c=x(16),m=JSON.stringify({dsn:t.dsn,sent_at:new Date().toISOString(),event_id:c,sdk:{name:t.sdkName,version:t.version}})+`
`+JSON.stringify({type:"transaction"})+`
`+JSON.stringify({event_id:c,type:"transaction",transaction:t.transactionName,transaction_info:{source:"custom"},platform:"javascript",environment:te,release:`${t.sdkName}@${t.version}`,start_timestamp:q/1e3,timestamp:Date.now()/1e3,contexts:{trace:{trace_id:i,span_id:d,op:"ads.display.batch",description:`Batch of ${e.batch_size??"unknown"} ads`,status:"ok"},browser:$},tags:r,measurements:s,spans:[{span_id:u,trace_id:i,parent_span_id:d,op:"ads.batch.load",description:`Load batch of ${e.batch_size??"unknown"} ads`,status:"ok",start_timestamp:(q+n)/1e3,timestamp:Date.now()/1e3,data:a}],sdk:{name:t.sdkName,version:t.version}}),v=t.dsn.replace(/^https:\/\/[^@]+@([^/]+)\/.*$/,`https://$1/api/${t.projectId}/envelope/`);fetch(v,{method:"POST",headers:{"Content-Type":"application/x-sentry-envelope"},body:m,keepalive:!0}).then(h=>{if(!h.ok)throw new Error("Fetch Failed")}).catch(()=>{var h;try{(h=navigator.sendBeacon)==null||h.call(navigator,v,new Blob([m],{type:"application/x-sentry-envelope"}))}catch{}})}let p;const $e={configLoaded:()=>{},beginCycle:()=>{},trackBidsComplete:()=>{},trackRenderComplete:()=>{},cleanup:()=>{},setSampleRate:()=>{},setCustomParams:()=>{}},ze=t=>{if(typeof window>"u")return I();p==null||p.cleanup();try{p=Be(t)}catch(e){console.error("[metrics] configure failed",e),p=void 0}try{window.addEventListener("pagehide",()=>{p==null||p.cleanup(),p=void 0},{once:!0,passive:!0})}catch{}return I()},I=()=>p??$e,S={configure:ze,configLoaded:t=>I().configLoaded(t),beginCycle:t=>I().beginCycle(t),trackBidsComplete:()=>I().trackBidsComplete(),trackRenderComplete:t=>I().trackRenderComplete(t),cleanup:()=>{p==null||p.cleanup(),p=void 0},setSampleRate:t=>I().setSampleRate(t),setCustomParams:t=>I().setCustomParams(t)},Je={dsn:"https://c89d8c19ab0b66e306812b0e503c6be3@sentry.arkadiumhosted.com/47",projectId:"47",sdkName:"ads.display.metrics",transactionName:"ads.display.batch.load",version:"10.0.6"};S.configure(Je);function J(t,e=!1){try{const n=window.localStorage.getItem(t);return e?JSON.parse(n):n}catch{return}}function ie(t,e){try{window.localStorage.setItem(t,e)}catch{}finally{return e}}const Ve=()=>{try{let t=J("eagle-access-token");if(!t)return;let e=t.split(".");return e.length<2?void 0:JSON.parse(atob(e[1]))}catch{return}},We=()=>{let t=[],e,n;const i=()=>Ve(),s=r=>t.forEach(a=>a(r));return{getState:i,subscribe(r){r(i()),t.push(r),e||(e=setInterval(()=>{const a=i();JSON.stringify(a)!==JSON.stringify(n)&&(n=a,s(a))},200))},unsubscribe(r){t=t.filter(a=>a!==r),t.length===0&&(clearInterval(e),e=void 0)}}};var D={};function se(t){if(D[t]!==void 0)return D[t];var e=document.cookie.split("; ").find(function(n){return n.startsWith(t)})||"";return D[t]=e.split("=")[1]||null,D[t]}var V={};function Xe(t){if(V[t]!==void 0)return V[t];var e=null,n=localStorage.getItem("eagle-access-token");if(n){var i=atob(n.split(".")[1]);try{e=JSON.parse(i)[t]||null}catch{e=null}}else e=null;return V[t]=e,e}var Ke=function(){function t(){}return t.trackImpression=function(e,n,i,s){return fetch("https://ads-aks.centralus.cloudapp.azure.com/imp",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({userId:se("ai_user"),sessionId:se("ai_session"),eagleId:Xe("sub"),source:document.location.href,referrer:document.referrer,kind:e,provider:n,cpm:i,meta:s})})},t}();function re(t,e){return new Promise(function(n,i){setTimeout(i,e);var s=document.createElement("script");s.src=t,s.onload=n,s.onerror=i,(document.head||document.body).appendChild(s)})}function Ye(t,e){var n="retry="+Math.random(),i=t.indexOf("?")===-1?"?":"&";return re(t+i+n,e)}var j={memo:{},load:function(t,e){function n(){return Ye(t,e)}return j.memo[t]=j.memo[t]||re(t,e).catch(n),j.memo[t]}};const W=window;W.__ark_ls=W.__ark_ls||j;function k(t,e=5e3){return W.__ark_ls.load(t,e)}const Qe="https://securepubads.g.doubleclick.net/tag/js/gpt.js",Ze="https://pagead2.googlesyndication.com/tag/js/gpt.js";function P(t){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];const e=document.cookie.includes("3PAdsOptOut=1")||document.cookie.includes("TOptOut=1")||navigator.globalPrivacyControl||navigator.doNotTrack==="1"||document.cookie.includes("child=1"),n=e?Ze:Qe;document.querySelector(`script[src="${n}"]`)||(k(n,1e4),e&&window.googletag.cmd.push(()=>window.googletag.pubads().setPrivacySettings({limitedAds:!0}))),window.googletag.cmd.push(()=>t(window.googletag))}function G(t){const e=new Error(t);return e.source="ulid",e}const X="0123456789ABCDEFGHJKMNPQRSTVWXYZ",M=X.length,ae=Math.pow(2,48)-1,et=10,tt=16;function nt(t){let e=Math.floor(t()*M);return e===M&&(e=M-1),X.charAt(e)}function it(t,e){if(isNaN(t))throw new Error(t+" must be a number");if(t>ae)throw G("cannot encode time greater than "+ae);if(t<0)throw G("time must be positive");if(Number.isInteger(Number(t))===!1)throw G("time must be an integer");let n,i="";for(;e>0;e--)n=t%M,i=X.charAt(n)+i,t=(t-n)/M;return i}function st(t,e){let n="";for(;t>0;t--)n=nt(e)+n;return n}function rt(t=!1,e){e||(e=typeof window<"u"?window:null);const n=e&&(e.crypto||e.msCrypto);if(n)return()=>{const i=new Uint8Array(1);return n.getRandomValues(i),i[0]/255};try{const i=require("crypto");return()=>i.randomBytes(1).readUInt8()/255}catch{}if(t){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch{}return()=>Math.random()}throw G("secure crypto unusable, insecure Math.random not allowed")}function at(t){return t||(t=rt()),function(n){return isNaN(n)&&(n=Date.now()),it(n,et)+st(tt,t)}}const ot=at();class dt{constructor(e,n,i){this.href=e,this.storage=n,this.cookies=i,this.kv={}}setKeyValue(e,n){this.kv[e]=n}getObject(e){return{...this.kv,...e.kv,elementId:e.id,product:e.product,dfpPrebid:"2",game_name:this.getGameName(),arkpromo:this.getArkPromo(),utm_campaign:this.getUtmCampaign(),ark_affiliate:this.getArkAffiliate(),ai_user:this.getAiUser(),ai_session:this.getAiSession()}}getArray(e){return Object.entries(this.getObject(e))}getAiUser(){const[e,n]=document.cookie.match(/ai_user=(.+?)(;|$)/)||[];return n}getAiSession(){const[e,n]=document.cookie.match(/ai_session=(.+?)(\||;|$)/)||[];return n}getPPID(){const e=this.storage.getItem("_ppid")||ot();return this.storage.setItem("_ppid",e),e}getGameName(){var i,s,r,a,d;const e=(s=(i=window.__arkPlayWidget__)==null?void 0:i.configObj)==null?void 0:s.config;if(e)return e["config-keys"]["external-game-id"];if((r=window.__gameData)!=null&&r.slug)return window.__gameData.slug;const n=(a=window.STORE)==null?void 0:a.getState();return n?(n==null?void 0:n.gameArena5Slug)||((d=n==null?void 0:n.game)==null?void 0:d.slug):(this.href().match(/games?\/([0-9A-z-]+)/)||[])[1]}getArkPromo(){return this.getFromStorageOrUrl("arkpromo")}getUtmCampaign(){return this.getFromStorageOrUrl("utm_campaign")}getArkAffiliate(){return this.getFromCookie("ark_affiliate")}getAdsABTest(){return this.getFromCookie("ark_abtest_variation")}getFromStorageOrUrl(e){try{const n=this.storage.getItem(e);if(n)return n;const[,i]=this.href().match(new RegExp(`${e}=([0-9A-z_]+)`))||[];return i?(this.storage.setItem(e,i),i):void 0}catch{return}}getFromCookie(e){const[,n]=this.cookies.match(new RegExp(e+"=([^;]*)"))||[];return n}}const ct=(t,e)=>window.requestIdleCallback?window.requestIdleCallback(t,{timeout:e}):setTimeout(t,e),ut=()=>{try{const t=localStorage.getItem("ark_modules:FP_VISITOR")||localStorage.getItem("evo:FP_VISITOR"),{fpVisitorId:e}=JSON.parse(t);return e}catch{return}},oe=t=>new Promise(e=>setTimeout(e,t));window.location.search.indexOf("utm_source=fb")!==-1||window.localStorage.getItem("utm_source"),window.location.search.indexOf("audigent_fb")!==-1&&(window.localStorage.getItem("arkpromo")||"").indexOf("audigent_fb");const lt=1e4;class ht{constructor(e,n){this.params=e,this.safeFrameService=n,this.slotMap={},this.requestType=e.requestType||"parallel",this.kv=new dt(()=>location.href,window.localStorage,document.cookie),this.gtagLoaded=new Promise((i,s)=>{setTimeout(s,lt),P(i)}),P(i=>{const s=i.pubads();s.disableInitialLoad(),s.enableSingleRequest(),s.setPublisherProvidedId(this.kv.getPPID()),i.enableServices()})}addAdUnit(e){P(n=>{const i=n.defineSlot(this.getAdUnitCode(e.id),e.size,e.code);i.addService(n.pubads()),this.slotMap[e.code]=i;for(let[s,r]of this.kv.getArray(e))i.setTargeting(s,r);i.addService(n.pubads()),n.display(e.code)})}removeAdUnit(e){P(n=>{const i=this.slotMap[e.code];i&&(n.destroySlots([i]),delete this.slotMap[e.code])})}refresh(e){this.gtagLoaded.catch(()=>this.fallbackRender(e)),P(n=>{const i=e.map(d=>this.slotMap[d]).filter(d=>!!d).map(d=>this.updateRefreshCount(d));if(i.length===0)return;if(this.requestType==="parallel"){n.pubads().refresh(i);return}const s=this.requestType==="sequential"?ct:setTimeout;let r=0;const a=()=>{if(!(r>=i.length)){try{n.pubads().refresh([i[r]])}catch{}r++,s(()=>requestAnimationFrame(a),5e3)}};a()})}getAdUnitCode(e){return`/${this.buildNetworkCode()}/${this.params.inventoryCode}/${e}`}on(e,n){P(i=>{i.pubads().addEventListener(e,n)})}fallbackRender(e){if(!window.pbjs)return;const n=window.pbjs.getBidResponses()||{};e.forEach(i=>{var u;const s=document.getElementById(i);if(!s)return;s.innerHTML="";const r=document.createElement("iframe");if(r.style.width="100%",r.style.height="100%",r.style.border="0",s.appendChild(r),!r.contentWindow)return;const a=r.contentWindow.document;a.open(),a.write("<head><style>body { margin: 0 }</style></head>");const d=((u=n[i])==null?void 0:u.bids)||[];if(d.length>0){const c=d.sort((m,v)=>v.cpm-m.cpm)[0];c.cpm>.4&&(window.pbjs.renderAd(a,c.adId,{}),Ke.trackImpression("display",c.adapterCode,c.cpm,{gtagTimeout:!0}),S.trackRenderComplete(i))}})}updateRefreshCount(e){const n=parseInt(e.getTargetingMap().refreshCount);return e.setForceSafeFrame(this.safeFrameService.getState(e.getSlotElementId())),e.setTargeting("refreshCount",(n+1||0).toString()),e}buildNetworkCode(){return this.params.dfpNetworkCode+(this.params.mcm?","+this.params.mcm:"")}}function mt(){try{let t=J("eagle-access-token");if(!t)return;let e=t.split(".");if(e.length<2)return;let{email:n}=JSON.parse(atob(e[1]));return n}catch{return}}const de=t=>window.pbjs.que.push(()=>t(window.pbjs));async function ft(t){if(window.pbjs)return new Promise(de);window.pbjs={que:[]},window.pbjs.que.push(()=>pt(t));const e=document.head||document.body,n=Object.assign(document.createElement("script"),{src:t.config.bundleUrl,async:!0,defer:!0});return e.appendChild(n),new Promise(de)}function pt(t){var u;const e=window.pbjs,n=[...t.config.bids,...t.videoConfig.bids];let i=!0,s=!0;e.bidderSettings={deviceAccess:!0,standard:{storageAllowed:!0,adserverTargeting:[{key:"hb_cpm",val(c){return c.cpm.toFixed(2)}},{key:"hb_pb",val(c){return c.cpm.toFixed(2)}},{key:"hb_adid",val(c){return c.adId}},{key:"hb_bidder",val(c){return c.adapterCode}},{key:"hb_adomain",val:c=>{var m;return((m=c.meta)==null?void 0:m.advertiserDomains)&&c.meta.advertiserDomains[0]}}]},pubmatic:{bidCpmAdjustment:c=>c*.8},rubicon:{bidCpmAdjustment:c=>c*.8},improvedigital:{bidCpmAdjustment:c=>c*.75},smaato:{bidCpmAdjustment:c=>c*.75},smartadserver:{bidCpmAdjustment:c=>c*.8},spotx:{bidCpmAdjustment:c=>c*.75}};const r=t.schain?{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{asi:"arkadium.com",sid:t.schain,hp:1}]}}:void 0,a=window.__tfcapi?{}:void 0;(document.cookie.includes("3PAdsOptOut")||document.cookie.includes("TOptOut")||navigator.doNotTrack==="1"||navigator.globalPrivacyControl)&&(s=!1,i=!1);const d={debug:location.search.includes("ark_ads_debug=true"),ortb2:{site:{content:{language:(u=document.querySelector("html"))==null?void 0:u.getAttribute("lang")}}},ttlBuffer:t.config.ttlBuffer||3,schain:r,consentManagement:a,firstPartyData:{enabled:!0,skipEnrichments:!1},gptPreAuction:{enabled:!0,mcmEnabled:!0},enableTIDs:!0,bidderSequence:"random",bidderTimeout:t.config.auctionTimeout,deviceAccess:s,pageUrl:document.location.href,useBidCache:!0,enableSendAllBids:!1,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache",ignoreBidderCacheKey:!1},improvedigital:{usePrebidSizes:!0},auctionOptions:{suppressStaleRender:!0,suppressExpiredRender:!0},userSync:{iframeEnabled:!0,syncEnabled:i,syncsPerBidder:t.config.syncsPerBidder,prebidLoadDelay:t.config.prebidLoadDelay,filterSettings:{all:{bidders:"*",filter:"include"}},userIds:gt(t.config.userIds)},s2sConfig:{enabled:!0,defaultVendor:"rubicon",accountId:"17214",bidders:n.filter(c=>c.isServer).map(c=>c.bidder),timeout:1e3},priceGranularity:{buckets:[{precision:2,max:50,increment:.01}]},floors:{data:{schema:{fields:["mediaType","size"]},values:{"banner|*":.05},default:.05}},bidViewability:{enabled:!0,firePixels:!0},disableAjaxTimeout:!0,allowActivities:{accessDevice:{default:!0},enrichEids:{default:!0},enrichUfpd:{default:!0},fetchBids:{default:!0},syncUser:{default:!0},transmitEids:{default:!0},transmitPreciseGeo:{default:!0},transmitTid:{default:!0},transmitUfpd:{default:!0}}};t.config.prebidEventHistoryTTL!=null&&(d.eventHistoryTTL=t.config.prebidEventHistoryTTL),e.setConfig(d),t.config.analytics&&t.config.analytics.length>0&&e.enableAnalytics(t.config.analytics)}function gt(t=[]){return t.map(e=>e.params.email?{...e,params:{...e.params,email:mt()}}:e)}const ce=ft,bt="https://arenacloud.cdn.arkadiumhosted.com/jarvis-api-prod",_t="default",ue=t=>fetch(`${bt}/v3/domains/name/${t}`);async function yt(t){const e=await ue(t);return e.ok&&e.status===200?await e.json():await ue(_t).then(n=>n.json())}function le(t,e){const n="default",i="pbjs",{id:s,refreshTime:r,userIds:a,tags:d,outstream:u}=t,c=t[e];return{id:s,name:n,globalName:i,refreshTime:r,bids:c,userIds:a,tags:d,bundleUrl:t.prebidUrl,outstream:u,sequential:t.sequential,requestType:t.requestType,killClarity:t.killClarity,isCleanIOEnabled:t.useCleanIO,isAmazonEnabled:t.useTAM,isAditudeEnabled:t.useAditude,isOutstreamEnabled:t.useOutstream,isH5Enabled:t.useH5,boltiveId:t.boltiveId,analytics:t.analytics,floors:t.floors,auctionTimeout:t.auctionTimeout,prebidTimeout:t.prebidTimeout,prebidEventHistoryTTL:t.prebidEventHistoryTTL,useSafeFrame:t.useSafeFrame,syncsPerBidder:t.syncsPerBidder,prebidLoadDelay:t.prebidLoadDelay,sentryMetricsSampleRate:t.sentryMetricsSampleRate}}function wt(t){return JSON.stringify(t).split("").reduce((e,n)=>(e<<5)-e+n.charCodeAt(0),0)}function vt(t){const[e,n]=document.location.search.match(/ark_ads_config=(\d+)/)||[];return t.find(i=>i.id===parseInt(n))}function St(t,e){const{id:n}=J(t,!0)||{};return e.find(i=>i.id===n)}function kt(t){const e="arkjar"+wt(t),n=vt(t)||St(e,t);if(n)return n;const i=t.reduce((a,d)=>a+d.weight,0),s=Math.random()*i;let r=0;for(const a of t)if(r+=a.weight,r>s)return ie(e,JSON.stringify(a)),a;return ie(e,JSON.stringify(t[0])),t[0]}function At(t){const{name:e,mcm:n,schain:i,configs:s}=t,r=kt(s),a=le(r,"display"),d=le(r,"video");return{id:r.id,name:e,mcm:n,schain:i,config:a,videoConfig:d}}function Tt(t){return yt(t).then(At)}var he;(function(t){t[t.aditude=0]="aditude",t[t.kargo=1]="kargo",t[t.exco=2]="exco",t[t.house=3]="house"})(he||(he={}));var me;(function(t){t.parallel="parallel",t.sequential="sequential",t.scattered="scattered"})(me||(me={}));var fe;(function(t){t.none="",t.aditude="aditude"})(fe||(fe={}));function Ct(){return fetch("https://geoip.cdn.arkadiumhosted.com/json/",{headers:{"X-GEO-APP":"ArkadiumAds"}}).then(e=>e.json())}function pe(){const t=window;return t.__ark_ads__=t.__ark_ads__||{},t.__ark_ads__.geoPromise=t.__ark_ads__.geoPromise||Ct(),t.__ark_ads__.geoPromise}const It=Tt;class Pt{constructor(e,n,i){this.config=e,this.dfpNetworkCode=n,this.inventoryCode=i,this.prebidTimeout=e.config.prebidTimeout,this.auctionTimeout=e.config.auctionTimeout,this.bids=e.config.bids,this.isPrebidDelayed=!1}async init(){return this.initPromise||(this.initPromise=this.createInitialPromise()),this.initPromise}async createInitialPromise(){const{prebidLoadDelay:e}=this.config.config;return e>0&&(this.isPrebidDelayed=!0,await oe(e),this.isPrebidDelayed=!1),this.prebidTimeout?Promise.race([oe(this.prebidTimeout).then(()=>[void 0,void 0]),Promise.all([ce(this.config),pe()])]):Promise.all([ce(this.config),pe()])}async addAdUnit(e){const[n,i]=await this.init();this.run(s=>{const r=`/${this.dfpNetworkCode}/${this.inventoryCode}/${e.id}`,a=i?this.applyGeoFilter(i,this.bids):this.bids;s.addAdUnits({code:e.code,bids:a.map(({bidder:d,params:u})=>({bidder:d,params:u})),sizes:e.size,mediaTypes:{banner:{sizes:e.size}},ortb2Imp:{ext:{data:{adserver:{adslot:r,name:"gam"},pbadslot:r},gpid:r}}})})}async removeAdUnit(e){this.run(n=>n.removeAdUnit(e.code))}async requestBids(e){if(this.isPrebidDelayed)return[];const[n]=await this.init();if(n)return new Promise(async i=>{this.run(s=>{s.requestBids({adUnitCodes:e,timeout:this.auctionTimeout,bidsBackHandler:r=>{P(()=>{s.setTargetingForGPTAsync(),i(r)})}})})})}applyGeoFilter(e,n){return n.filter(i=>!i.geo||new RegExp(i.geo).test(e.country_code))}run(e){const n=window;n.pbjs=n.pbjs||{que:[]},n.pbjs.que=n.pbjs.que||[],n.pbjs.que.push(()=>e(n.pbjs))}}class Et{constructor(e){this.host=e,this.fetched=It(this.host)}fetch(){return this.fetched}}function Rt(){(function(t,e,n,i,s,r,a){if(e[t])return;function d(u,c){e[t]._Q.push([u,c])}e[t]={init(){d("i",arguments)},fetchBids(){d("f",arguments)},setDisplayBids(){},targetingKeys(){return[]},_Q:[]},r=n.createElement(i),r.async=!0,r.src=s,a=n.getElementsByTagName(i)[0],a.parentNode&&a.parentNode.insertBefore(r,a),window.apstag.init({pubID:"661990cc-08cb-45bb-9ee2-90c2a9034640",adServer:"googletag",videoAdServer:"DFP"})})("apstag",window,document,"script","https://c.amazon-adsystem.com/aax2/apstag.js")}class Mt{constructor(e,n,i=2e3){this.dfpNetworkCode=e,this.au=n,this.timeout=i,this.adUnits=[],Rt(),this.addListener()}addAdUnit(e){this.adUnits.push({slotID:e.code,slotName:`${this.dfpNetworkCode}/${this.au}/${e.id}`,sizes:e.size})}requestBids(e){return window.apstag?new Promise(n=>{setTimeout(n,this.timeout);const i=()=>{try{window.apstag.setDisplayBids()}catch{}n()},r={slots:this.adUnits.filter(a=>e.includes(a.slotID)),timeout:this.timeout};try{window.apstag.fetchBids(r,i).catch(n)}catch{n()}}):Promise.resolve()}addListener(){try{const e="tpc.googlesyndication.com";document.body.insertAdjacentHTML("beforeend",'<div id="apstag-iframes" style="display: none"></div>'),window.addEventListener("message",n=>{const{data:i}=n;if(!i||i.type!=="apstag")return!1;console.log("Caught Amazon SafeFrame creative!");const s=window.apstag;if(!s)return console.error("The apstag window variable is not defined."),!1;if(!i.adId)return console.error('The message from apstag did not contain an "adId" field.'),!1;const r=document.createElement("iframe");r.style.display="none",document.getElementById("apstag-iframes").append(r);const a=r.contentDocument;s.renderImp(a,i.adId);const d={title:a.title,headHTML:a.head?a.head.innerHTML:"",bodyHTML:a.body?a.body.innerHTML:"",cookie:a.cookie};return n.source.postMessage({type:"apstagResponse",adDocumentData:d},n.origin),r.remove(),!0},!1)}catch(e){console.error(e)}}}const Nt="https://dn0qt3r0xannq.cloudfront.net/arkadium-QKoDH9ov9c/arkadium-floors/prebid-load.js";class Ft{constructor(e){e.floors==="aditude"&&k(Nt)}}class K{static getInstance(e){return this.instance||(this.instance=new K(e)),this.instance}constructor(e){this._loaded=e?k(`https://tagan.adlightning.com/${e}/op.js`):Promise.resolve()}}class Ot{constructor(e){this.load=e}init({isCleanIOEnabled:e}){e&&this.load("https://cadmus.script.ac/d5d56pqwoxts5/script.js")}}class U{constructor(){const e={headers:{"X-GEO-APP":"ArkadiumAds"}};this._geoPromise=fetch("https://geoip.cdn.arkadiumhosted.com/json/",e).then(n=>n.json())}static getInstance(){return window.__ark_ads__=window.__ark_ads__||{},window.__ark_ads__.geo=window.__ark_ads__.geo||new U,window.__ark_ads__.geo}getGeo(){return Promise.race([this._geoPromise,new Promise(e=>setTimeout(e,1e3))])}}class Ht{constructor(){this.hasPressed=!1,window.addEventListener("keyup",this.onKeyWindowKeyDown.bind(this))}onKeyWindowKeyDown(e){e.key==="["&&(this.hasPressed?(this.hasPressed=!1,this.copyReport()):(this.hasPressed=!0,setTimeout(()=>this.hasPressed=!1,3e3)))}copyReport(){const e=pbjs==null?void 0:pbjs.getAllPrebidWinningBids().map(n=>{var i;return n.adUnitCode+": "+[n.adapterCode,n.size,n.creativeId,(i=n.meta)==null?void 0:i.advertiserName].join(", ")}).join(`
`);this.renderTooltip(e)}renderTooltip(e){var n;window.closeAdsDiag=()=>{var i;return(i=document.querySelector("#ads_diag_container"))==null?void 0:i.remove()},document.body.insertAdjacentHTML("beforeend",`
      <div id="ads_diag_container" style="position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.7); display: flex;">
        <div style="width: 400px; height: 300px; border-radius: 5px; border: 1px solid black; background: white; margin: auto; padding: 1em;">
          <p style="color: black; display: flex; justify-content: space-between;">
            <span>Ads Diagnostic Data:</span>
            <small style="text-align: right; cursor: pointer" onclick="closeAdsDiag()">‚ùå</small>
          </p>
          <textarea id="ads_diag_data">${e}</textarea>
          <small>Please, copy this data and send to Arkadium Support</small>
        </div>
      </div>
    `),(n=document.querySelector("#ads_diag_container textarea"))==null||n.select()}}const xt="https://dn0qt3r0xannq.cloudfront.net/arkadium-QKoDH9ov9c/arkadium-video/prebid-load.js",ge="aditude-outstream";let N;const be=()=>document.querySelector(ge),_e=()=>{var t;(t=be())==null||t.remove(),N==null||N.then(()=>window.tude.destroyOutstream())},Lt=t=>{if(!N)return N=k(xt),_e;if(!be()){const e=document.createElement(ge);document.body.appendChild(e)}return _e},Dt="https://player.ex.co/player/7d402f6f-f79b-4e92-b42a-7edc6c2e4af3",jt="div#7d402f6f-f79b-4e92-b42a-7edc6c2e4af3";let ye;const we=()=>document.querySelector(jt),ve=()=>{var t;return(t=we())==null?void 0:t.remove()},Gt=t=>ye?(we()||t.insertAdjacentHTML("afterend",'<div id="7d402f6f-f79b-4e92-b42a-7edc6c2e4af3"></div>'),ve):(ye=k(Dt),t.insertAdjacentHTML("afterend",'<div id="7d402f6f-f79b-4e92-b42a-7edc6c2e4af3"></div>'),ve),Ut="https://standout-cdn.kargo.com/js/rh.min.js",Bt="div.kargo-ad-content";let Se;const ke=()=>document.querySelector(Bt),Ae=()=>{var t;return(t=ke())==null?void 0:t.remove()},qt=t=>{if(!Se)return Se=k(Ut),Ae;if(!ke()){const e=document.createElement("div");e.classList.add("kargo-ad-content"),document.body.appendChild(e)}return Ae},$t="arkadium-outstream",zt=()=>document.querySelector($t),Jt=()=>{var t;return(t=zt())==null?void 0:t.remove()},Vt=t=>(console.warn("Not implemented yet."),Jt);var Te=(t=>(t[t.aditude=0]="aditude",t[t.kargo=1]="kargo",t[t.exco=2]="exco",t[t.house=3]="house",t))(Te||{});function Wt(){const t=e=>`display-ad-component[data-id="${e}"]`;return document.querySelector(t("ark_display_r2"))||document.querySelector(t("sidebar_ad3"))}function Xt(t){if(!(t in Te))return()=>null;const e=Kt[t];let n;const i=setInterval(()=>{const s=Wt();if(s&&!n)return n=e(s);!s&&n&&(n(),n=void 0)},500);return()=>clearInterval(i)}const Kt={0:Lt,2:Gt,1:qt,3:Vt};class Yt{constructor(e,n){this.isEnabled=e,this.kv=n,this.isSet=!1,this.configRef=null}configure(e){if(this.isSet)return;this.isEnabled&&k("https://raven-edge.aditude.io/raven/arkadium-main-AgEVa/library.js"),window.Raven=window.Raven||{};const n=window.Raven;n.cmd=n.cmd||[],n.cmd.push(({config:i})=>{this.configRef=i,this.setParams(e)}),this.isSet=!0}setParams(e,n=100){if(!this.configRef)return;const{product:i,adsABTest:s,game_name:r,ai_user:a,ai_session:d,arkpromo:u,ABTestSlot1:c,ABTestRefreshGroup:m}=this.kv.getObject(e);this.configRef.setCustom({param1:i||"NO_PRODUCT",param2:s||"NO_CONFIG",param3:r||"NO_GAME_NAME",param4:ut()||"NO_FP_ID",param5:a||"NO_AI_USER",param6:d||"NO_AI_SESSION",param7:u||"NO_PROMO",param9:c||"NO_AB_TEST_SLOT_1",param10:m||"NO_AB_TEST_REFRESH_GROUP"}),(!a||!d)&&n>0&&setTimeout(()=>this.setParams(e,n-1),300)}}class Qt{constructor(){this.enabled=!1,this.config=new Map,this.state=new Map}setEnabled(e){this.enabled=e||!1}setConfig(e){e.forEach(n=>{this.config.set(n.bidder,n.isSafeFrame)})}updateState(e={}){for(let[n,{bids:i}]of Object.entries(e)){const s=i.sort((r,a)=>a.cpm-r.cpm)[0];this.state.set(n,this.config.get(s.bidder)||!1)}}getState(e){return this.enabled?["ark_display_m1","footer_ad_small"].includes(e)?!0:this.state.get(e)??!0:!1}}class Zt{init(e=!1){e&&(window.clarity={})}}class F{constructor(e){this.host=e,this.userObserver=We(),this.dfpNetworkCode="100151972",this.refreshTime=30,this.adUnits=[],this.adUnitsToRefresh=[],this.safeFrameService=new Qt,this.clarityHammer=new Zt,this.requestType="parallel",U.getInstance(),this.cleanio=new Ot(k),this.configService=new Et(this.host),this.reporting=new Ht,this.configService.fetched.then(n=>{this.clarityHammer.init(n.config.killClarity)})}static getInstance(e){if(window.__ark_ads__=window.__ark_ads__||{},window.__ark_ads__.core)return window.__ark_ads__.core;if(!e)throw Error("Host is lost!");return window.__ark_ads__.core=new F(e)}async init(){return this.initPromise?this.initPromise:this.initPromise=this.configService.fetched.then(async e=>{var r;try{const a=await U.getInstance().getGeo();if((this.host==="zone.msn.com"||this.host==="zone-uat.msn.com")&&(a==null?void 0:a.country_name)==="China"){window.__ark_ads__.disableServices=!0;return}}catch{}if(this.requestType=e.config.requestType,window.__ark_ads__.disableServices)return;S.configLoaded(e==null?void 0:e.id),((r=e==null?void 0:e.config)==null?void 0:r.sentryMetricsSampleRate)!==void 0&&S.setSampleRate(e.config.sentryMetricsSampleRate);const{id:n,mcm:i,config:s}=e;this.lightning=K.getInstance(s.boltiveId),this.cleanio.init(s),this.refreshTime=s.refreshTime,this.aditude=new Ft(s),this.adServer=new ht({mcm:i,dfpNetworkCode:this.dfpNetworkCode,inventoryCode:this.host,requestType:this.requestType},this.safeFrameService),this.insights=new Yt(s.isAditudeEnabled,this.adServer.kv),this.adServer.kv.setKeyValue("adsABTest",String(n)),this.adServer.on("slotRenderEnded",this.slotRenderEndedHandler.bind(this)),this.prebid=new Pt(e,this.dfpNetworkCode,this.host),s.useSafeFrame&&this.adServer.kv.setKeyValue("sf","yes"),this.safeFrameService.setEnabled(s.useSafeFrame),this.safeFrameService.setConfig(e.config.bids),Xt(s.outstream),s.isAmazonEnabled&&(this.amazon=new Mt(this.dfpNetworkCode,this.host,s.auctionTimeout)),s.tags.forEach(a=>{if(a.url&&k(a.url),a.inline)try{new Function(a.inline)()}catch(d){console.warn(d)}}),setInterval(()=>this.scheduleAdRequest(),250)})}addAdUnit(e){this.init().then(()=>{var n,i,s,r;(n=this.insights)==null||n.configure(e),S.setCustomParams(e.kv),this.adUnits.push(e),(i=this.amazon)==null||i.addAdUnit(e),(s=this.prebid)==null||s.addAdUnit(e),(r=this.adServer)==null||r.addAdUnit(e),this.scheduleAdRequest()})}removeAdUnit(e){var n,i;this.adUnits=this.adUnits.filter(s=>s.code!==e.code),(n=this.adServer)==null||n.removeAdUnit(e),(i=this.prebid)==null||i.removeAdUnit(e)}scheduleAdRequest(){this.scheduled&&clearTimeout(this.scheduled),this.scheduled=setTimeout(()=>this.autoRefresh(),200)}scheduleRefresh(e){const n=this.adUnits.find(s=>s===e),i=this.adUnitsToRefresh.some(s=>s===e);n&&!i&&this.adUnitsToRefresh.push(n)}async autoRefresh(){if(await this.init(),!document.hasFocus()&&window.self===window.top)return;const e=this.adUnits.filter(this.isAdUnitAutoRefresh.bind(this)).concat(this.adUnitsToRefresh).filter(this.isAdUnitVisible.bind(this)).filter(this.isAdUnitExpired.bind(this)).map(this.setAdUnitRefreshed.bind(this));if(e.length!==0)return S.beginCycle(e.length),this.adUnitsToRefresh=[],this.requestAds(e)}requestAds(e){var n,i;return Promise.all([((n=this.prebid)==null?void 0:n.requestBids(e))||Promise.resolve(),((i=this.amazon)==null?void 0:i.requestBids(e))||Promise.resolve()]).then(([s])=>{this.safeFrameService.updateState(s),S.trackBidsComplete()}).catch(s=>{console.warn("Bids request failed:",s),S.trackBidsComplete()}).finally(()=>{var s;return(s=this.adServer)==null?void 0:s.refresh(e)})}setAdUnitRefreshed(e){return e.lastRefreshed=Date.now(),e.code}isAdUnitAutoRefresh(e){return!(e.autoRefresh===!1&&e.lastRefreshed>0)}isAdUnitExpired(e){return Date.now()>e.lastRefreshed+this.refreshTime*1e3}isAdUnitVisible(e){const n=document.getElementById(e.code),i=window;if(!n||!n.parentElement||n.checkVisibility&&!n.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0})||n.style.display==="none")return!1;const s=n.getBoundingClientRect(),r=.5,a=s.top+s.height*r<=i.innerHeight&&s.bottom-s.height*r>=0,d=s.left+s.width*r<=i.innerWidth&&s.right-s.width*r>=0;return a&&d}slotRenderEndedHandler(e){const n=e.slot.getTargetingMap();Number(e.slot.lineItemId),e.slot.isEmpty;const i=Number(n.hb_cpm&&n.hb_cpm[0]);n.hb_bidder&&n.hb_bidder[0];const s=n.elementId&&n.elementId[0],a=(n.product&&n.product[0])==="evo"?s:e.slot.getSlotElementId(),d=Number(n.refreshCount&&n.refreshCount[0]);if(!this.onShowGTMEvent){console.log("AdUnit rendered: ",e),S.trackRenderComplete(s);return}const u=d>0,c={isEmpty:e.isEmpty,size:e.size,cpm:Number(i)};try{this.dispatchEvent("impression",{elementId:s,isRefresh:u,...c}),this.onShowGTMEvent([a],u,c)}catch(m){console.warn("GTM event error:",m)}finally{S.trackRenderComplete(s)}}dispatchEvent(e,n){const i=new CustomEvent(`display-ads:${e}`,{bubbles:!0,cancelable:!0,detail:n});return document.dispatchEvent(i)}}const Ce=new Map,Ie=t=>{const e=Ce.get(t)||0;return Ce.set(t,e+1),t+"_"+e},R=(t,e,n=!1)=>{const i=t.getAttribute(e);if(i){if(!n)return i;try{return JSON.parse(i||"")}catch{console.warn(`Can't parse supplied "${e}" attribute.`)}}},en={create(t){return{...t,code:Ie(t.id),lastRefreshed:0}},createFromAttributes(t){const e=R(t,"data-is")||R(t,"data-id"),n=Ie(e);return{id:e,code:n,size:R(t,"dimensions",!0),kv:R(t,"keyvalues",!0),product:R(t,"product"),autoRefresh:R(t,"auto-refresh")!=="false",lastRefreshed:0}}};class Y{constructor(){this.__fields={},this.adUnit="",this.bidsFilter="",this.bidderTimeout=3e3,this.destroyCreateRefresh=!1,this.dfpNetworkCode="100151972",this.dimensions=[],this.enableRefresh=!0,this.gaTracker=void 0,this.gdpr={enabled:!1,personalizedAds:!1},this.headerBidding=!0,this.keyValues=[],this.kbaEnabled=!0,this.refreshRate=1,this.refreshTime=31e3,this.product="",this.target="",this.trackElementID=!0,this.trackPagePath=!1,this.trackWebView=!1,this.viewableOnly=!0,this.viewabilityPercent=25,Object.keys(this).forEach(e=>{this.__fields[e.toLowerCase()]=e})}fromJSON(e={}){for(let n in this)["fromJSON","__fields","clone"].includes(n)||(this[n]=e[n]||e[n.toLowerCase()]||this[n])}clone(){const e=new Y;return e.fromJSON({...this}),e}}class tn extends HTMLElement{constructor(){super(),this.coreService=F.getInstance(),this.adQueueItem={adConfig:new Y},this.adUnit={}}connectedCallback(){this.adUnit=en.createFromAttributes(this),this.render(),this.applyStyles(),this.stylesInterval=setInterval(this.applyStyles.bind(this),1e3),this.coreService.addAdUnit(this.adUnit)}disconnectedCallback(){clearInterval(this.stylesInterval),this.coreService.removeAdUnit(this.adUnit)}isViewable(){return console.warn(".isViewable() is deprecated."),this.coreService.isAdUnitVisible(this.adUnit)}refresh(){this.coreService.scheduleRefresh(this.adUnit)}render(){var n,i;const e=(i=(n=this.previousSibling)==null?void 0:n.textContent)!=null&&i.includes("Ad")?"":'<div style="position: absolute; left: 0; top: 0; opacity: .5; background: #fff; color: #000; font-size: 9px; padding: 2px 4px;">Ad</div>';this.innerHTML=`<div id="${this.adUnit.code}" style="width: 100%; height: 100%; position: relative;"></div>${e}`}applyStyles(){try{this.style.overflow="hidden",this.style.position="relative",this.style.display="block",this.style.height=Math.max(...this.adUnit.size.map(([e,n])=>n))+"px",this.style.width=Math.max(...this.adUnit.size.map(([e,n])=>e))+"px"}catch{}}}class nn{constructor(e={}){this.elements=[],this.coreService=F.getInstance(),this.onShowEvent=null,this.commonAttrs={},this.__onShow=(n=[])=>{this.onShowEvent&&this.onShowEvent(n)},e.onShow&&typeof e.onShow=="function"&&(this.onShowEvent=(n=[])=>e.onShow(n)),this.coreService.onShowGTMEvent=this.__onShow,this.commonAttrs.product=e.product}get bidTimeout(){return 1200}set bidTimeout(e){}add(e){const n=document.createElement("display-ad-component");n.setAttribute("product",this.commonAttrs.product),n.setAttribute("data-id",e.target),n.setAttribute("dimensions",JSON.stringify(e.dimensions)),n.componentId=e.target,this.elements.push(n)}refresh(e=[]){this.elements.forEach(n=>{n.parentNode||console.warn("[refresh] WARNING item.parentNode falsey"),(e.length===0||e.includes(n.externalComponentId||n.componentId))&&n.refresh()})}show(){this.elements.forEach(e=>{if(e.parentNode)return;const n=e.componentId,i=document.getElementById(n);i&&(i.removeAttribute("id"),e.externalComponentId=n,i.appendChild(e))})}remove(e=[]){(e.length===0?this.elements:this.elements.filter(i=>e.includes(i.externalComponentId||i.componentId))).forEach(i=>{i.parentNode&&(i.externalComponentId&&i.parentElement.setAttribute("id",i.externalComponentId),i.parentElement.removeChild(i))}),e.length>0?this.elements=this.elements.filter(i=>!e.includes(i.externalComponentId||i.componentId)):this.elements=[]}}const Pe=t=>{try{return t()}catch{return}};function sn(){const{hostname:t}=window.location;return window===window.top||t.includes("arkadiumarena.com")||t.includes("rtl.de")?t:Pe(()=>{var e;return(e=window.top)==null?void 0:e.location.hostname})||Pe(()=>new URL(document.referrer).hostname)||"default"}function rn(){const t=sn();return t.includes("googlesyndication")?"safeframe.googlesyndication.com":t}function an(){const i="#0f0",s="#0f0",r="rgba(0, 0, 0)",a="14px monospace",d=document.createElement("div");d.style.cssText=`
        position: fixed;
        top: 10px;
        right: 10px;
        padding: 8px;
        background: ${r};
        color: ${i};
        font-family: ${a};
        border-radius: 4px;
        z-index: 10000;
        pointer-events: none;
    `;const u=document.createElement("canvas");u.width=200,u.height=50,u.style.display="block",u.style.marginTop="4px",d.appendChild(u),document.body.appendChild(d);let c=0,m=performance.now(),v=0;const h=new Array(100).fill(60),b=u.getContext("2d");function O(){c++;const A=performance.now(),T=A-m;T>=1e3&&(v=Math.round(c*1e3/T),c=0,m=A,h.push(v),h.length>100&&h.shift(),d.firstChild.textContent=`FPS: ${v}`,H()),requestAnimationFrame(O)}function H(){b.clearRect(0,0,200,50);const A=Math.max(...h,60),T=Math.min(...h,15),C=A-T||1,E=200/100;b.fillStyle=s;for(let _=0;_<h.length;_++){const Re=(h[_]-T)/C*50,dn=_*E,cn=50-Re;b.fillRect(dn,cn,E-1,Re)}if(A>=60){const _=50-(60-T)/C*50;b.strokeStyle="#ff0",b.lineWidth=1,b.beginPath(),b.moveTo(0,_),b.lineTo(200,_),b.stroke()}}return d.innerHTML="<div>FPS: --</div>",d.appendChild(u),O(),()=>{document.body.removeChild(d)}}window.__ark_ads__=window.__ark_ads__||{},window.__ark_ads__.cmd=window.__ark_ads__.cmd||[],window.__ark_ads__.core=window.__ark_ads__.core||F.getInstance(rn()),window.__ark_ads__.displayAd=window.__ark_ads__.displayAd||{ArkGoogleTag:nn},window.__ark_ads__.displayAdReady=t=>{t()},on(tn),window.location.search.includes("ark_fps=1")&&an();function on(t,e="display-ad-component"){customElements.get(e)||customElements.define(e,t)}})();
//# sourceMappingURL=display-ads.js.map
