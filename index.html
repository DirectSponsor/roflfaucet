<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROFLFaucet (beta) - Hilarious Crypto Faucet Supporting Projects</title>
    <meta name="description" content="Claim free UselessCoins while supporting amazing projects with your votes! The most entertaining crypto faucet experience.">
    <meta name="keywords" content="crypto faucet, free UselessCoins, project voting, cryptocurrency, blockchain">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="ROFLFaucet - Free UselessCoins + Project Voting">
    <meta property="og:description" content="The most entertaining crypto faucet! Claim free UselessCoins while supporting projects through voting.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://roflfaucet.com">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3ctext y='.9em' font-size='90'%3eü§£%3c/text%3e%3c/svg%3e">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- hCaptcha -->
    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>ü§£ ROFLFaucet</h1>
                <span class="tagline">Free UselessCoins + Project Voting</span>
            </div>
            
            <!-- User Navigation -->
            <nav class="nav">
                <a href="#faucet" class="nav-link active">Faucet</a>
                <a href="illusions.html" class="nav-link">üëÅÔ∏è Illusions</a>
                <a href="#voting" class="nav-link">Project Voting</a>
                <a href="#achievements" class="nav-link">Achievements</a>
                <a href="#about" class="nav-link">About</a>
                
                <!-- User Menu -->
                <div class="user-menu" style="margin-left: auto;">
                    <button class="user-button" onclick="toggleUserMenu()" id="user-menu-btn" style="display: none;">
                        <span>üë§</span>
                        <span id="nav-username">User</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-item" onclick="showBalance()">üí∞ Balance</div>
                        <div class="dropdown-item" onclick="logout()">üö™ Logout</div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            <div class="content-grid">
                <!-- Left Sidebar -->
                <aside class="sidebar-left">
                    <!-- Media Content Slot -->
                    <div class="media-slot giphy-slot">
                        <div class="media-header">
                            <span class="media-label">üé≠ Entertainment Hub</span>
                        </div>
                        <div class="media-content">
                            <div class="loading-placeholder">üé¨ Funny content loading...<br><br>Get ready to laugh!</div>
                        </div>
                    </div>
                    
                    <!-- Ad Space -->
                    <div class="ad-space">
                        <div class="ad-header">
                            <span class="ad-label">Advertisement</span>
                        </div>
                        <div class="ad-content">
                            <div style="background: #e8f4fd; padding: 2rem; text-align: center; border-radius: 8px;">
                                <p>üöÄ Crypto Services</p>
                                <p>Your Ad Here</p>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="quick-stats">
                        <h3>üìä Live Stats</h3>
                        <div class="stats-grid">
                            <div class="quick-stat">
                                <span class="stat-number">1,247</span>
                                <span class="stat-label">Users</span>
                            </div>
                            <div class="quick-stat">
                                <span class="stat-number" id="total-projects">3</span>
                                <span class="stat-label">Projects</span>
                            </div>
                        </div>
                    </div>
                </aside>

                <!-- Faucet Section -->
                <section id="faucet" class="faucet-section">
                    <div class="faucet-card">
                        <div class="faucet-header">
                            <h2>üéâ Claim Your Free UselessCoins!</h2>
                        </div>
                        <div class="faucet-content">
                            <!-- Video Section Placeholder -->
                            <div class="video-section-inline">
                                <div class="video-container">
                                    <div style="background: #f0f0f0; padding: 3rem; text-align: center; border-radius: 8px;">
                                        <p>üì∫ Hilarious Videos Coming Soon!</p>
                                        <p>Random entertaining content will load here</p>
                                    </div>
                                </div>
                            </div>

                            <!-- OAuth Login Section -->
                            <div id="signup-section" class="signup-section">
                                <div class="auth-container">
                                    <!-- Tab Headers -->
                                    <div class="auth-tabs">
                                        <button class="tab-button active" data-tab="login">Log In</button>
                                        <button class="tab-button" data-tab="signup">Sign Up</button>
                                    </div>
                                    
                                    <!-- Log In Tab -->
                                    <div class="tab-content active" id="login-tab">
                                        <div class="tab-inner">
                                            <h3>üëã Welcome Back!</h3>
                                            <p>Sign in to your DirectSponsor account to claim UselessCoins and vote for projects!</p>
                                            
                                            <button id="login-btn" class="auth-button" onclick="startOAuthLogin()">
                                                <span>üîê Sign in with DirectSponsor</span>
                                            </button>
                                            
                                            <div class="auth-info">
                                                <p><strong>üí∞ Your Progress Saved:</strong><br>
                                                Your balance, achievements, and voting history are all preserved.</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Sign Up Tab -->
                                    <div class="tab-content" id="signup-tab">
                                        <div class="tab-inner">
                                            <h3>üéâ Join ROFLFaucet!</h3>
                                            <p>Create your DirectSponsor account and start earning UselessCoins</p>
                                            
                                            <button id="signup-btn" class="auth-button" onclick="startOAuthSignup()">
                                                <span>üöÄ Create DirectSponsor Account</span>
                                            </button>
                                            
                                            <div class="auth-benefits">
                                                <h4>‚ú® What You Get:</h4>
                                                <ul>
                                                    <li>üé≤ Claim UselessCoins every hour</li>
                                                    <li>üó≥Ô∏è Vote on amazing projects</li>
                                                    <li>üèÜ Unlock achievements & rewards</li>
                                                    <li>üì± One account across entire ecosystem</li>
                                                </ul>
                                            </div>
                                            
                                            <div class="auth-info">
                                                <p><strong>üåê Ecosystem Access:</strong><br>
                                                Your account works on ROFLFaucet, ClickForCharity, DirectSponsor, and more!</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- User Dashboard -->
                            <div id="user-section" class="user-section" style="display: none;">
                                <div class="user-welcome">
                                    <h3>Welcome back, <span id="username-display">User</span>! üëã</h3>
                                </div>
                                
                                <!-- Balance Display -->
                                <div class="user-stats" style="margin: 20px 0;">
                                    <div class="stat-item" style="text-align: center; font-size: 18px;">
                                        <span style="color: #FFD700;">üí∞ Your Balance: </span>
                                        <span id="balance-display" style="font-weight: bold; color: #4CAF50;">0</span> UC
                                    </div>
                                </div>
                                
                                <!-- Claim Button -->
                                <button id="claim-btn" class="claim-button" onclick="claimFaucet()">
                                    <span class="btn-text">üé≤ Claim 5000 UselessCoins!</span>
                                </button>
                                
                                <!-- Refresh Button -->
                                <button onclick="updateBalance()" style="
                                    background: #6c757d; 
                                    color: white; 
                                    border: none; 
                                    padding: 10px 20px; 
                                    border-radius: 5px; 
                                    cursor: pointer;
                                    margin: 10px;
                                ">
                                    üîÑ Refresh Balance
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Right Sidebar -->
                <aside class="sidebar-right">
                    <!-- Project Voting Section -->
                    <div id="voting" class="voting-section">
                        <h3>üó≥Ô∏è Vote for Projects</h3>
                        <div class="project-cards">
                            <div class="project-card">
                                <h4>üöÄ Project 1</h4>
                                <p>Revolutionary blockchain innovation!</p>
                                <div id="uselesscoin-vote-widget-1" data-project="project1"></div>
                            </div>
                            
                            <div class="project-card">
                                <h4>‚≠ê Project 2</h4>
                                <p>Next-gen decentralized platform!</p>
                                <div id="uselesscoin-vote-widget-2" data-project="project2"></div>
                            </div>
                            
                            <div class="project-card">
                                <h4>üî• Project 3</h4>
                                <p>AI-powered crypto solution!</p>
                                <div id="uselesscoin-vote-widget-3" data-project="project3"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ad Space -->
                    <div class="ad-space">
                        <div class="ad-header">
                            <span class="ad-label">Community Partner</span>
                        </div>
                        <div class="ad-content">
                            <div style="background: #f5f5f5; padding: 2rem; text-align: center; border-radius: 8px;">
                                <p>üéÆ Gaming Platform</p>
                                <p>Play & Earn</p>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>ü§£ ROFLFaucet</h4>
                    <p>The most entertaining way to earn UselessCoins while supporting amazing projects!</p>
                </div>
                <div class="footer-section">
                    <h4>Links</h4>
                    <p><a href="#about">About</a> | <a href="#voting">Projects</a> | <a href="illusions.html">Illusions</a></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Include UselessCoin Widget (Cross-Server) -->
    <script src="http://89.116.106.121/uselesscoin-vote-widget.js"></script>
    
    <!-- ROFLFaucet + UselessCoin Integration Script -->
    <script>
        const apiUrl = 'http://89.116.106.121/uselesscoin-faucet-style.php';
        let currentUser = null;
        let userBalance = 0;

        // Initialize on page load
        window.addEventListener('load', function() {
            setupTabSwitching();
            currentUser = getUserFromStorage();
            if (currentUser) {
                showUserSection();
                updateBalance();
                initializeVotingWidgets();
            } else {
                showLoginSection();
            }
        });
        
        // Set up tab switching functionality for auth interface
        function setupTabSwitching() {
            console.log('Setting up tab switching...');
            
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.getAttribute('data-tab');
                    
                    // Remove active class from all buttons
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    // Remove active class from all tab contents
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked button
                    button.classList.add('active');
                    
                    // Show corresponding tab content
                    const targetContent = document.getElementById(`${targetTab}-tab`);
                    if (targetContent) {
                        targetContent.classList.add('active');
                    }
                    
                    console.log(`Switched to ${targetTab} tab`);
                });
            });
        }

        function getUserFromStorage() {
            // Check for OAuth access token first
            const accessToken = localStorage.getItem('access_token');
            if (accessToken) {
                const username = localStorage.getItem('username');
                return username;
            }
            
            // Fallback to simple uselesscoin_user for compatibility
            let user = localStorage.getItem('uselesscoin_user');
            if (user) return user;
            
            const cookies = document.cookie.split(';');
            for (let cookie of cookies) {
                const [name, value] = cookie.trim().split('=');
                if (name === 'uselesscoin_user') {
                    return value;
                }
            }
            return null;
        }

        // OAuth Login Functions
        function startOAuthLogin() {
            // Redirect to DirectSponsor OAuth
            const redirectUri = encodeURIComponent(window.location.href);
            const oauthUrl = `https://directsponsor.org/oauth/authorize?response_type=code&client_id=roflfaucet&redirect_uri=${redirectUri}&scope=read+write`;
            window.location.href = oauthUrl;
        }
        
        function startOAuthSignup() {
            // Redirect to DirectSponsor signup flow
            const redirectUri = encodeURIComponent(window.location.href);
            const signupUrl = `https://directsponsor.org/oauth/authorize?response_type=code&client_id=roflfaucet&redirect_uri=${redirectUri}&scope=read+write&signup=true`;
            window.location.href = signupUrl;
        }

        function logout() {
            localStorage.removeItem('uselesscoin_user');
            document.cookie = 'uselesscoin_user=; path=/; max-age=0';
            currentUser = null;
            showLoginSection();
            hideUserMenu();
        }

        function showLoginSection() {
            document.getElementById('signup-section').style.display = 'block';
            document.getElementById('user-section').style.display = 'none';
            document.getElementById('user-menu-btn').style.display = 'none';
        }

        function showUserSection() {
            document.getElementById('signup-section').style.display = 'none';
            document.getElementById('user-section').style.display = 'block';
            document.getElementById('user-menu-btn').style.display = 'flex';
            document.getElementById('username-display').textContent = currentUser;
            document.getElementById('nav-username').textContent = currentUser;
        }

        async function updateBalance() {
            if (!currentUser) return;
            
            try {
                const response = await fetch(`${apiUrl}?action=user&user=${currentUser}`);
                const data = await response.json();
                userBalance = data.coins || 0;
                document.getElementById('balance-display').textContent = userBalance.toLocaleString();
            } catch (error) {
                console.error('Failed to update balance:', error);
            }
        }

        async function claimFaucet() {
            if (!currentUser) return;
            
            try {
                const response = await fetch(`${apiUrl}?action=faucet`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: `user=${currentUser}`
                });
                const data = await response.json();
                
                if (data.success) {
                    showNotification(`üö∞ +${data.coinsAwarded} UselessCoins claimed!`, 'success');
                    updateBalance();
                } else {
                    showNotification(data.message || 'Claim failed', 'error');
                }
            } catch (error) {
                console.error('Faucet claim failed:', error);
                showNotification('Claim failed. Please try again.', 'error');
            }
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: ${type === 'success' ? '#4CAF50' : '#f44336'};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                font-weight: bold;
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function initializeVotingWidgets() {
            // Trigger widget initialization for project voting
            setTimeout(() => {
                if (window.uselessCoinWidget) {
                    uselessCoinWidget.refresh();
                }
            }, 500);
        }

        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('show');
        }

        function hideUserMenu() {
            document.getElementById('userDropdown').classList.remove('show');
        }

        function showBalance() {
            hideUserMenu();
            showNotification(`üí∞ Your balance: ${userBalance.toLocaleString()} UselessCoins`, 'info');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            
            if (userMenu && !userMenu.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });
    </script>

    <style>
        /* Additional styles for integration */
        .user-menu {
            position: relative;
            display: inline-block;
        }
        .user-button {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        .user-button:hover {
            background: rgba(255,255,255,0.3);
        }
        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(0,0,0,0.9);
            border-radius: 8px;
            padding: 10px 0;
            min-width: 150px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            display: none;
        }
        .user-dropdown.show {
            display: block;
        }
        .dropdown-item {
            padding: 10px 20px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .dropdown-item:hover {
            background: rgba(255,255,255,0.1);
        }
        .project-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .project-card h4 {
            margin: 0 0 10px 0;
            color: #FFD700;
        }
        .project-card p {
            margin: 0 0 15px 0;
            font-size: 14px;
            opacity: 0.9;
        }
        .voting-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .voting-section h3 {
            margin-top: 0;
            color: #FFD700;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(100%); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* Tab System Styles */
        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
        }
        
        .tab-button {
            flex: 1;
            padding: 12px 20px;
            background: transparent;
            color: rgba(255,255,255,0.7);
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab-button:hover {
            color: rgba(255,255,255,0.9);
            background: rgba(255,255,255,0.1);
        }
        
        .tab-button.active {
            color: #FFD700;
            border-bottom-color: #FFD700;
            background: rgba(255,215,0,0.1);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .auth-container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .auth-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 15px 0;
        }
        
        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .auth-info {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .auth-benefits {
            margin: 15px 0;
        }
        
        .auth-benefits h4 {
            color: #FFD700;
            margin-bottom: 10px;
        }
        
        .auth-benefits ul {
            list-style: none;
            padding: 0;
        }
        
        .auth-benefits li {
            padding: 5px 0;
            border-left: 3px solid #4CAF50;
            padding-left: 15px;
            margin: 8px 0;
        }
    </style>
</body>
</html>

